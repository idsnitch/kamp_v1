{% extends 'base.htm.twig' %}
{% block javascript %}

    <!-- Core JS files -->
    <script type="text/javascript" src="{{ asset('loko/js/plugins/loaders/pace.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/core/libraries/jquery.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/core/libraries/bootstrap.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/plugins/loaders/blockui.min.js') }}"></script>
    <!-- /core JS files -->
    <!-- Theme JS files -->
    <script type="text/javascript" src="{{ asset('loko/js/plugins/forms/wizards/steps.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/plugins/tables/datatables/datatables.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/plugins/forms/selects/select2.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/plugins/forms/styling/uniform.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/core/libraries/jasny_bootstrap.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/plugins/forms/validation/validate.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/plugins/extensions/cookie.js') }}"></script>

    <script type="text/javascript" src="{{ asset('loko/js/core/app.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/pages/datatables_basic.js') }}"></script>
    <script type="text/javascript" src="{{ asset('loko/js/pages/wizard_steps.js') }}"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/js/bootstrap-datepicker.min.js"></script>

    <script src="{{ asset('loko/mod_vina_treeview_menus/assets/js/jquery.cookie.js') }}"
            type="text/javascript"></script>
    <script src="{{ asset('loko/mod_vina_treeview_menus/assets/js/jquery.treeview.js') }}"
            type="text/javascript"></script>
    <script type="text/javascript">

        jQuery( document ).ready(function() {

            jQuery('#recordings').DataTable();
        });

    </script>
    <script type="text/javascript">
        jQuery(function () {
            jQuery(document).ready(function () {
                jQuery('.active').addClass('open');
                jQuery('.active').children('ul').slideDown();
                jQuery('#je_accord460 li.has-sub>a').on('click', function () {
                    jQuery(this).removeAttr('href');
                    var element = jQuery(this).parent('li');

                    if (element.hasClass('open')) {
                        element.removeClass('open');
                        element.find('li').removeClass('open');
                        element.find('ul').slideUp('normal');
                    }
                    else {
                        element.addClass('open');
                        element.children('ul').slideDown('normal');
                        element.siblings('li').children('ul').slideUp('normal');
                        element.siblings('li').removeClass('open');
                        element.siblings('li').find('li').removeClass('open');
                        element.siblings('li').find('ul').slideUp('normal');
                    }
                });
                jQuery('.kin').addClass('active');

                jQuery('#je_accord460>ul>li.has-sub>a').append('<span class="holder"></span>');
            });
        });

        jQuery(function ($) {
            $(".hasTooltip").tooltip({"html": true, "container": "body"});
        });
    </script>
{% endblock %}
{% block title %}My Next of Kin{% endblock %}
{% block pageTitle %}<h2>My Next of Kin</h2>{% endblock %}
{% block breadCrumbs %}
    <ol class="breadcrumb">
        <li><i class="fa fa-home"></i></li>
        <li><a href="{{ path('home') }}" class="pathway">Home</a></li>
        <li class="active">My Next of Kin</li>
    </ol>
{% endblock %}
{% block left %}{% endblock %}
{% block component %}
<div id="sp-component" class="col-sm-12 col-md-12">
    {% endblock %}
    {% block body %}
        <div class="box">
            <div class="box-header">
                <h3 class="box-title">My Next of Kin</h3>
                <a class="btn btn-primary pull-right" href="{{ path('add-next-of-kin') }}"><span class="fa fa-plus-circle"></span> Add Next of Kin</a>
            </div>
            <div class="box-body">
                <table id="recordings" class="table table-striped table-condensed">
                    <thead>

                    <th>Full Names</th>
                    <th>Relationship</th>
                    <th>Percent</th>
                    <th>&nbsp;ID/Passport No.</th>
                    <th>&nbsp;Phone</th>
                    <th>Email</th>
                    <th>Manage</th>
                    </thead>
                    <tbody>
                    {% for kin in kinsList  %}
                        <tr>
                            <td><a style="color: #fd9614" href="{{ path('view-kin-details',{
                                    'id':kin.id
                                }) }}"> {{ kin.firstName }} {{ kin.lastName }}</a></td>

                            <td>{{ kin.relationship }}</td>
                            <td>{{ kin.percent }}</td>
                            <td>{{ kin.idNumber }}</td>
                            <td>{{ kin.phoneNumber }}</td>
                            <td>{{ kin.email }}</td>
                            <td><a href="{{ path('edit-next-of-kin',{'id':kin.id}) }}"><i class="fa fa-edit"></i> Edit</a>&nbsp;&nbsp;<a href=""><i class="fa fa-times"></i> Delete</a> </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="7" align="center">You have not added any Next of Kin yet.</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    {% endblock %}
    {% block right %}
{% endblock %}